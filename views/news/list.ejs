<%- include('../partials/header') %>

<div class="news-container">
    <h1 style="color: antiquewhite; margin-bottom: 30px;">Latest Updates</h1>

    <!-- Ongoing Matters Section -->
    <div class="ongoing-matters-box">
        <h2>ONGOING MATTERS</h2>
        <p>
            1. Implementation of Green Highways Policy 2015<br>
            2. Illegal Sand Mining<br>
            3. Solid Waste management<br>
            4. Pollution of the Agnitheerta - Sowparnika River at Kollur Mookambika Temple<br>
            5. Destruction of the ecosystem by Kharland projects<br>
            6. Challenging the CZMP map under CRZ 2019 notification<br>
            7. Elevated Highway<br>
            8. Climate emergency<br>
            9. Netravathi Riverfront Promenade Project
        </p>
    </div>

    <div class="news-header">
        <!-- Date Filter -->
        <!-- <div class="date-filter">
            <form action="/news" method="GET" id="dateFilterForm">
                <label for="dateSelect" style="color: aliceblue;">Filter by Date:</label>
                <select id="dateSelect" name="date" onchange="this.form.submit()">
                    <option value="">All Dates</option>
                    <% availableDates.forEach(date => { %>
                        <option value="<%= date %>" <%= selectedDate === date ? 'selected' : '' %>>
                            <%= new Date(date).toLocaleDateString() %>
                        </option>
                    <% }); %>
                </select>
            </form>
        </div> -->
    </div>

    <% if (news.length === 0) { %>
        <div class="no-news">
            <!-- <p>No news available for this date.</p> -->
        </div>
    <% } else { %>
        <div class="news-grid">
            <% news.forEach(item => { %>
                <div class="news-card">
                    <% if (item.mediaType === 'image' && item.mediaUrl) { %>
                        <img src="<%= item.mediaUrl %>" alt="<%= item.title %>">
                    <% } %>
                    <div class="news-content">
                        <h3><%= item.title %></h3>
                        <p><%= item.content.substring(0, 150) %>...</p>
                        <div class="news-meta">
                            <span>By <%= item.createdBy.username %></span>
                            <span><%= new Date(item.createdAt).toLocaleDateString() %></span>
                        </div>
                        <a href="/news/<%= item._id %>" class="btn-secondary">Read More</a>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } %>
</div>

<%- include('../partials/footer') %>